/**
 * 基于jQuery的树形菜单，后台系统菜单
 * @author 余鹏
 * @param {Object} containerId	容器ID
 * @param {Object} menuData	菜单数据
 * @param {Object} toggleSpeed	菜单展开速度 毫秒
 */
//此处需要修改，点击菜单跳转的地址前缀
var basePath='http://192.168.1.98/chat';
var TreeMenu=function(h,k,l){function m(c){$(".mainMenu .menu-title,.mainMenu .menu-child-title").on("click",function(){var a=$(this);a.parent().addClass("active");for(var d=a.parent().siblings(),b=0;b<d.length;b++){var f=$(d[b]),e=f.find(".mainMenu-icon");e.hasClass("active")&&e.removeClass("active");f.find(".menu-arrow").hasClass("rotate180")&&f.find(".menu-arrow").removeClass("rotate180");f.find(".menu-children").slideUp(c.toggleSpeed)}g(a.parent().siblings());a.find(".menu-arrow").toggleClass("rotate180");
a.next(".menu-children").slideToggle(c.toggleSpeed)});$(".mainMenu .menu-last").on("click",function(){var a=$(this);a.addClass("active");g(a.siblings())})}function g(c){for(var a=0;a<c.length;a++)$(c[a]).removeClass("active")}function e(c){var a="";if(c.children&&0<c.children.length){for(var d=0;d<c.children.length;d++){var b=c.children[d];b.iconSvg=b.icon?svgStore.menuIcon[b.icon]:"";b.children&&0<b.children.length?(e(b),a+=replaceHtmlTemplate("",menuTemp.menuChildParent,b)):(b.iconSvg=svgStore.menuIcon["caret-right"],
b.url=basePath+"/"+b.url,a+=replaceHtmlTemplate("",menuTemp.menuLast,b))}c.childrenList=a}}this.containerId=h;this.data=k||[];this.toggleSpeed=l||300;this.init=function(){if(this.containerId)if(0==this.data.length)console.error("\u6ca1\u6709\u83dc\u5355\u539f\u6570\u636e");else{for(var c="",a=0;a<this.data.length;a++){var d=this.data[a];d.children&&0<d.children.length&&e(d);d.iconSvg=d.icon?svgStore.menuIcon[d.icon]:"";c+=replaceHtmlTemplate("",menuTemp.menuParent,d)}a=$(menuTemp.mainMenuContainer);
a.html(c+menuTemp.static());$(this.containerId).html(a);m(this)}else console.error("\u8bf7\u6307\u5b9a\u83dc\u5355\u5bb9\u5668")}};